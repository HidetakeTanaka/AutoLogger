{
  "file": "scripts\\script65.py",
  "candidates": [
    {
      "kind": "func_entry",
      "line": 22,
      "end_line": 22,
      "function": "is_low_stock",
      "class_name": "Product",
      "code": "def is_low_stock(self, threshold: int = 5) -> bool:",
      "vars_in_scope": [
        "self",
        "threshold"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 23,
      "end_line": 23,
      "function": "is_low_stock",
      "class_name": "Product",
      "code": "return self.stock <= threshold",
      "vars_in_scope": [
        "self",
        "threshold"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 25,
      "end_line": 25,
      "function": "age_hours",
      "class_name": "Product",
      "code": "def age_hours(self, ref: Optional[datetime] = None) -> float:",
      "vars_in_scope": [
        "delta",
        "ref",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 29,
      "end_line": 29,
      "function": "age_hours",
      "class_name": "Product",
      "code": "return delta.total_seconds() / 3600.0",
      "vars_in_scope": [
        "delta",
        "ref",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 31,
      "end_line": 31,
      "function": "matches",
      "class_name": "Product",
      "code": "def matches(self, query: str) -> bool:",
      "vars_in_scope": [
        "q",
        "query",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 34,
      "end_line": 34,
      "function": "matches",
      "class_name": "Product",
      "code": "return True",
      "vars_in_scope": [
        "q",
        "query",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 36,
      "end_line": 36,
      "function": "matches",
      "class_name": "Product",
      "code": "return True",
      "vars_in_scope": [
        "q",
        "query",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 37,
      "end_line": 37,
      "function": "matches",
      "class_name": "Product",
      "code": "return any((q in t.lower() for t in self.tags))",
      "vars_in_scope": [
        "q",
        "query",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 39,
      "end_line": 39,
      "function": "to_dict",
      "class_name": "Product",
      "code": "def to_dict(self) -> Dict[str, Any]:",
      "vars_in_scope": [
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 40,
      "end_line": 40,
      "function": "to_dict",
      "class_name": "Product",
      "code": "return {'product_id': self.product_id, 'name': self.name, 'category': self.category, 'price': self.price, 'stock': self.stock, 'updated_at': self.updated_at.isoformat(), 'tags': list(self.tags)}",
      "vars_in_scope": [
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 51,
      "end_line": 51,
      "function": "from_dict",
      "class_name": "Product",
      "code": "def from_dict(cls, raw: Dict[str, Any]) -> Optional[\"Product\"]:",
      "vars_in_scope": [
        "cls",
        "raw",
        "ts_raw",
        "updated_at"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 57,
      "end_line": 57,
      "function": "from_dict",
      "class_name": "Product",
      "code": "return cls(product_id=str(raw.get('product_id', '')), name=str(raw.get('name', '')), category=str(raw.get('category', '')), price=float(raw.get('price', 0.0)), stock=int(raw.get('stock', 0)), updated_at=updated_at, tags=list(raw.get('tags', [])))",
      "vars_in_scope": [
        "cls",
        "raw",
        "ts_raw",
        "updated_at"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "exception_handler_entry",
      "line": 66,
      "end_line": 66,
      "function": "from_dict",
      "class_name": "Product",
      "code": "except ...",
      "vars_in_scope": [
        "cls",
        "raw",
        "ts_raw",
        "updated_at"
      ],
      "why": "exception handler enry",
      "severity_hint": "ERROR"
    },
    {
      "kind": "return_stmt",
      "line": 67,
      "end_line": 67,
      "function": "from_dict",
      "class_name": "Product",
      "code": "return None",
      "vars_in_scope": [
        "cls",
        "raw",
        "ts_raw",
        "updated_at"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 71,
      "end_line": 71,
      "function": "__init__",
      "class_name": "Inventory",
      "code": "def __init__(self, inventory_id: str) -> None:",
      "vars_in_scope": [
        "inventory_id",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "func_entry",
      "line": 75,
      "end_line": 75,
      "function": "add",
      "class_name": "Inventory",
      "code": "def add(self, product: Product) -> None:",
      "vars_in_scope": [
        "product",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "func_entry",
      "line": 78,
      "end_line": 78,
      "function": "get",
      "class_name": "Inventory",
      "code": "def get(self, product_id: str) -> Optional[Product]:",
      "vars_in_scope": [
        "product_id",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 79,
      "end_line": 79,
      "function": "get",
      "class_name": "Inventory",
      "code": "return self._products.get(product_id)",
      "vars_in_scope": [
        "product_id",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 81,
      "end_line": 81,
      "function": "all",
      "class_name": "Inventory",
      "code": "def all(self) -> List[Product]:",
      "vars_in_scope": [
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 82,
      "end_line": 82,
      "function": "all",
      "class_name": "Inventory",
      "code": "return list(self._products.values())",
      "vars_in_scope": [
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 84,
      "end_line": 84,
      "function": "search",
      "class_name": "Inventory",
      "code": "def search(self, query: str = \"\") -> List[Product]:",
      "vars_in_scope": [
        "query",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 85,
      "end_line": 85,
      "function": "search",
      "class_name": "Inventory",
      "code": "return [p for p in self._products.values() if p.matches(query)]",
      "vars_in_scope": [
        "query",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 87,
      "end_line": 87,
      "function": "low_stock",
      "class_name": "Inventory",
      "code": "def low_stock(self, threshold: int = 5) -> List[Product]:",
      "vars_in_scope": [
        "self",
        "threshold"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 88,
      "end_line": 88,
      "function": "low_stock",
      "class_name": "Inventory",
      "code": "return [p for p in self._products.values() if p.is_low_stock(threshold)]",
      "vars_in_scope": [
        "self",
        "threshold"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 90,
      "end_line": 90,
      "function": "to_dict",
      "class_name": "Inventory",
      "code": "def to_dict(self) -> Dict[str, Any]:",
      "vars_in_scope": [
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 91,
      "end_line": 91,
      "function": "to_dict",
      "class_name": "Inventory",
      "code": "return {'inventory_id': self.inventory_id, 'products': [p.to_dict() for p in self._products.values()]}",
      "vars_in_scope": [
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 97,
      "end_line": 97,
      "function": "from_dict",
      "class_name": "Inventory",
      "code": "def from_dict(cls, raw: Dict[str, Any]) -> \"Inventory\":",
      "vars_in_scope": [
        "cls",
        "inv",
        "p",
        "raw"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 103,
      "end_line": 103,
      "function": "from_dict",
      "class_name": "Inventory",
      "code": "return inv",
      "vars_in_scope": [
        "cls",
        "inv",
        "p",
        "raw"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 107,
      "end_line": 107,
      "function": "__init__",
      "class_name": "PricingClient",
      "code": "def __init__(self, base_url: str, timeout: int = 5) -> None:",
      "vars_in_scope": [
        "base_url",
        "self",
        "timeout"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "func_entry",
      "line": 111,
      "end_line": 111,
      "function": "_url",
      "class_name": "PricingClient",
      "code": "def _url(self, product_id: str) -> str:",
      "vars_in_scope": [
        "product_id",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 112,
      "end_line": 112,
      "function": "_url",
      "class_name": "PricingClient",
      "code": "return f'{self.base_url}/pricing/{product_id}.json'",
      "vars_in_scope": [
        "product_id",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 114,
      "end_line": 114,
      "function": "fetch_price",
      "class_name": "PricingClient",
      "code": "def fetch_price(self, product_id: str) -> Optional[float]:",
      "vars_in_scope": [
        "body",
        "data",
        "product_id",
        "req",
        "self",
        "url"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 122,
      "end_line": 122,
      "function": "fetch_price",
      "class_name": "PricingClient",
      "code": "return None",
      "vars_in_scope": [
        "body",
        "data",
        "product_id",
        "req",
        "self",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 123,
      "end_line": 123,
      "function": "fetch_price",
      "class_name": "PricingClient",
      "code": "return float(data['price'])",
      "vars_in_scope": [
        "body",
        "data",
        "product_id",
        "req",
        "self",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "exception_handler_entry",
      "line": 124,
      "end_line": 124,
      "function": "fetch_price",
      "class_name": "PricingClient",
      "code": "except ...",
      "vars_in_scope": [
        "body",
        "data",
        "product_id",
        "req",
        "self",
        "url"
      ],
      "why": "exception handler enry",
      "severity_hint": "ERROR"
    },
    {
      "kind": "return_stmt",
      "line": 125,
      "end_line": 125,
      "function": "fetch_price",
      "class_name": "PricingClient",
      "code": "return None",
      "vars_in_scope": [
        "body",
        "data",
        "product_id",
        "req",
        "self",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 128,
      "end_line": 128,
      "function": "load_inventory",
      "class_name": null,
      "code": "def load_inventory(path: Path) -> Inventory:",
      "vars_in_scope": [
        "path",
        "raw"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 131,
      "end_line": 131,
      "function": "load_inventory",
      "class_name": null,
      "code": "return Inventory.from_dict(raw)",
      "vars_in_scope": [
        "path",
        "raw"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "exception_handler_entry",
      "line": 132,
      "end_line": 132,
      "function": "load_inventory",
      "class_name": null,
      "code": "except ...",
      "vars_in_scope": [
        "path",
        "raw"
      ],
      "why": "exception handler enry",
      "severity_hint": "ERROR"
    },
    {
      "kind": "return_stmt",
      "line": 133,
      "end_line": 133,
      "function": "load_inventory",
      "class_name": null,
      "code": "return Inventory(inventory_id='local')",
      "vars_in_scope": [
        "path",
        "raw"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 136,
      "end_line": 136,
      "function": "save_inventory",
      "class_name": null,
      "code": "def save_inventory(path: Path, inv: Inventory) -> None:",
      "vars_in_scope": [
        "inv",
        "path",
        "payload",
        "tmp"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "exception_handler_entry",
      "line": 142,
      "end_line": 142,
      "function": "save_inventory",
      "class_name": null,
      "code": "except ...",
      "vars_in_scope": [
        "inv",
        "path",
        "payload",
        "tmp"
      ],
      "why": "exception handler enry",
      "severity_hint": "ERROR"
    },
    {
      "kind": "exception_handler_entry",
      "line": 146,
      "end_line": 146,
      "function": "save_inventory",
      "class_name": null,
      "code": "except ...",
      "vars_in_scope": [
        "inv",
        "path",
        "payload",
        "tmp"
      ],
      "why": "exception handler enry",
      "severity_hint": "ERROR"
    },
    {
      "kind": "func_entry",
      "line": 150,
      "end_line": 150,
      "function": "compute_summary",
      "class_name": null,
      "code": "def compute_summary(inv: Inventory) -> Dict[str, Any]:",
      "vars_in_scope": [
        "inv",
        "low",
        "products",
        "total_price"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 153,
      "end_line": 153,
      "function": "compute_summary",
      "class_name": null,
      "code": "return {'count': 0, 'avg_price': 0.0, 'low_stock': 0}",
      "vars_in_scope": [
        "inv",
        "low",
        "products",
        "total_price"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 156,
      "end_line": 156,
      "function": "compute_summary",
      "class_name": null,
      "code": "return {'count': len(products), 'avg_price': total_price / len(products), 'low_stock': low}",
      "vars_in_scope": [
        "inv",
        "low",
        "products",
        "total_price"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 163,
      "end_line": 163,
      "function": "update_prices",
      "class_name": null,
      "code": "def update_prices(inv: Inventory, client: PricingClient) -> int:",
      "vars_in_scope": [
        "client",
        "inv",
        "new_price",
        "updated"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 171,
      "end_line": 171,
      "function": "update_prices",
      "class_name": null,
      "code": "return updated",
      "vars_in_scope": [
        "client",
        "inv",
        "new_price",
        "updated"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 174,
      "end_line": 174,
      "function": "simulate_sales",
      "class_name": null,
      "code": "def simulate_sales(inv: Inventory, rounds: int = 3) -> List[Dict[str, Any]]:",
      "vars_in_scope": [
        "history",
        "inv",
        "p",
        "products",
        "rounds",
        "sold"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 178,
      "end_line": 178,
      "function": "simulate_sales",
      "class_name": null,
      "code": "return history",
      "vars_in_scope": [
        "history",
        "inv",
        "p",
        "products",
        "rounds",
        "sold"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 185,
      "end_line": 185,
      "function": "simulate_sales",
      "class_name": null,
      "code": "return history",
      "vars_in_scope": [
        "history",
        "inv",
        "p",
        "products",
        "rounds",
        "sold"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 188,
      "end_line": 188,
      "function": "restock_low",
      "class_name": null,
      "code": "def restock_low(inv: Inventory, min_stock: int = 5, target_stock: int = 10) -> int:",
      "vars_in_scope": [
        "count",
        "inv",
        "min_stock",
        "target_stock"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 195,
      "end_line": 195,
      "function": "restock_low",
      "class_name": null,
      "code": "return count",
      "vars_in_scope": [
        "count",
        "inv",
        "min_stock",
        "target_stock"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 198,
      "end_line": 198,
      "function": "main",
      "class_name": null,
      "code": "def main(data_dir: str = \"data\", base_url: str = \"\") -> int:",
      "vars_in_scope": [
        "base",
        "base_url",
        "client",
        "data_dir",
        "inv",
        "inv_path",
        "summary",
        "summary_path",
        "updated"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "exception_handler_entry",
      "line": 216,
      "end_line": 216,
      "function": "main",
      "class_name": null,
      "code": "except ...",
      "vars_in_scope": [
        "base",
        "base_url",
        "client",
        "data_dir",
        "inv",
        "inv_path",
        "summary",
        "summary_path",
        "updated"
      ],
      "why": "exception handler enry",
      "severity_hint": "ERROR"
    },
    {
      "kind": "return_stmt",
      "line": 217,
      "end_line": 217,
      "function": "main",
      "class_name": null,
      "code": "return 1",
      "vars_in_scope": [
        "base",
        "base_url",
        "client",
        "data_dir",
        "inv",
        "inv_path",
        "summary",
        "summary_path",
        "updated"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 218,
      "end_line": 218,
      "function": "main",
      "class_name": null,
      "code": "return 0",
      "vars_in_scope": [
        "base",
        "base_url",
        "client",
        "data_dir",
        "inv",
        "inv_path",
        "summary",
        "summary_path",
        "updated"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    }
  ]
}