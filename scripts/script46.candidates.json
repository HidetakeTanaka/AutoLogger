{
  "file": "scripts\\script46.py",
  "candidates": [
    {
      "kind": "func_entry",
      "line": 21,
      "end_line": 21,
      "function": "is_recent",
      "class_name": "Article",
      "code": "def is_recent(self, days: int = 2) -> bool:",
      "vars_in_scope": [
        "days",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 23,
      "end_line": 23,
      "function": "is_recent",
      "class_name": "Article",
      "code": "return False",
      "vars_in_scope": [
        "days",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 24,
      "end_line": 24,
      "function": "is_recent",
      "class_name": "Article",
      "code": "return self.published >= datetime.utcnow() - timedelta(days=days)",
      "vars_in_scope": [
        "days",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 26,
      "end_line": 26,
      "function": "matches_query",
      "class_name": "Article",
      "code": "def matches_query(self, query: str) -> bool:",
      "vars_in_scope": [
        "q",
        "query",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 29,
      "end_line": 29,
      "function": "matches_query",
      "class_name": "Article",
      "code": "return True",
      "vars_in_scope": [
        "q",
        "query",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 31,
      "end_line": 31,
      "function": "matches_query",
      "class_name": "Article",
      "code": "return True",
      "vars_in_scope": [
        "q",
        "query",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 32,
      "end_line": 32,
      "function": "matches_query",
      "class_name": "Article",
      "code": "return any((q in t.lower() for t in self.tags))",
      "vars_in_scope": [
        "q",
        "query",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 34,
      "end_line": 34,
      "function": "to_dict",
      "class_name": "Article",
      "code": "def to_dict(self) -> Dict[str, Any]:",
      "vars_in_scope": [
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 35,
      "end_line": 35,
      "function": "to_dict",
      "class_name": "Article",
      "code": "return {'article_id': self.article_id, 'title': self.title, 'source': self.source, 'tags': list(self.tags), 'published': self.published.isoformat(), 'score': self.score, 'url': self.url}",
      "vars_in_scope": [
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 46,
      "end_line": 46,
      "function": "from_dict",
      "class_name": "Article",
      "code": "def from_dict(cls, raw: Dict[str, Any]) -> Optional[\"Article\"]:",
      "vars_in_scope": [
        "cls",
        "published",
        "raw",
        "ts_raw"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 50,
      "end_line": 50,
      "function": "from_dict",
      "class_name": "Article",
      "code": "return cls(article_id=str(raw.get('article_id', '')), title=str(raw.get('title', '')), source=str(raw.get('source', '')), tags=list(raw.get('tags', [])), published=published, score=float(raw.get('score', 0.0)), url=str(raw.get('url', '')))",
      "vars_in_scope": [
        "cls",
        "published",
        "raw",
        "ts_raw"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "exception_handler_entry",
      "line": 59,
      "end_line": 59,
      "function": "from_dict",
      "class_name": "Article",
      "code": "except ...",
      "vars_in_scope": [
        "cls",
        "published",
        "raw",
        "ts_raw"
      ],
      "why": "exception handler enry",
      "severity_hint": "ERROR"
    },
    {
      "kind": "return_stmt",
      "line": 60,
      "end_line": 60,
      "function": "from_dict",
      "class_name": "Article",
      "code": "return None",
      "vars_in_scope": [
        "cls",
        "published",
        "raw",
        "ts_raw"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 67,
      "end_line": 67,
      "function": "add",
      "class_name": "NewsStore",
      "code": "def add(self, article: Article) -> None:",
      "vars_in_scope": [
        "article",
        "existing",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 69,
      "end_line": 69,
      "function": "add",
      "class_name": "NewsStore",
      "code": "return",
      "vars_in_scope": [
        "article",
        "existing",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 72,
      "end_line": 72,
      "function": "add",
      "class_name": "NewsStore",
      "code": "return",
      "vars_in_scope": [
        "article",
        "existing",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 75,
      "end_line": 75,
      "function": "get",
      "class_name": "NewsStore",
      "code": "def get(self, article_id: str) -> Optional[Article]:",
      "vars_in_scope": [
        "article_id",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 76,
      "end_line": 76,
      "function": "get",
      "class_name": "NewsStore",
      "code": "return self._articles.get(article_id)",
      "vars_in_scope": [
        "article_id",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 78,
      "end_line": 78,
      "function": "all",
      "class_name": "NewsStore",
      "code": "def all(self) -> List[Article]:",
      "vars_in_scope": [
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 79,
      "end_line": 79,
      "function": "all",
      "class_name": "NewsStore",
      "code": "return list(self._articles.values())",
      "vars_in_scope": [
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 81,
      "end_line": 81,
      "function": "recent",
      "class_name": "NewsStore",
      "code": "def recent(self, days: int = 2) -> List[Article]:",
      "vars_in_scope": [
        "days",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 82,
      "end_line": 82,
      "function": "recent",
      "class_name": "NewsStore",
      "code": "return [a for a in self._articles.values() if a.is_recent(days)]",
      "vars_in_scope": [
        "days",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 84,
      "end_line": 84,
      "function": "filter",
      "class_name": "NewsStore",
      "code": "def filter(self, query: str = \"\", min_score: float = 0.0) -> List[Article]:",
      "vars_in_scope": [
        "min_score",
        "query",
        "result",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 92,
      "end_line": 92,
      "function": "filter",
      "class_name": "NewsStore",
      "code": "return result",
      "vars_in_scope": [
        "min_score",
        "query",
        "result",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 96,
      "end_line": 96,
      "function": "__init__",
      "class_name": "NewsApiClient",
      "code": "def __init__(self, base_url: str, timeout: int = 5) -> None:",
      "vars_in_scope": [
        "base_url",
        "self",
        "timeout"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "func_entry",
      "line": 100,
      "end_line": 100,
      "function": "_url",
      "class_name": "NewsApiClient",
      "code": "def _url(self, path: str) -> str:",
      "vars_in_scope": [
        "path",
        "self"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 103,
      "end_line": 103,
      "function": "_url",
      "class_name": "NewsApiClient",
      "code": "return self.base_url + path",
      "vars_in_scope": [
        "path",
        "self"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 105,
      "end_line": 105,
      "function": "_request_json",
      "class_name": "NewsApiClient",
      "code": "def _request_json(self, url: str) -> Optional[Dict[str, Any]]:",
      "vars_in_scope": [
        "body",
        "req",
        "self",
        "tries",
        "url"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 113,
      "end_line": 113,
      "function": "_request_json",
      "class_name": "NewsApiClient",
      "code": "return json.loads(body.decode('utf-8'))",
      "vars_in_scope": [
        "body",
        "req",
        "self",
        "tries",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "exception_handler_entry",
      "line": 114,
      "end_line": 114,
      "function": "_request_json",
      "class_name": "NewsApiClient",
      "code": "except ...",
      "vars_in_scope": [
        "body",
        "req",
        "self",
        "tries",
        "url"
      ],
      "why": "exception handler enry",
      "severity_hint": "ERROR"
    },
    {
      "kind": "return_stmt",
      "line": 116,
      "end_line": 116,
      "function": "_request_json",
      "class_name": "NewsApiClient",
      "code": "return None",
      "vars_in_scope": [
        "body",
        "req",
        "self",
        "tries",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 117,
      "end_line": 117,
      "function": "_request_json",
      "class_name": "NewsApiClient",
      "code": "return None",
      "vars_in_scope": [
        "body",
        "req",
        "self",
        "tries",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 119,
      "end_line": 119,
      "function": "fetch_headlines",
      "class_name": "NewsApiClient",
      "code": "def fetch_headlines(self, topic: str = \"\") -> List[Dict[str, Any]]:",
      "vars_in_scope": [
        "data",
        "items",
        "self",
        "topic",
        "url"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 121,
      "end_line": 121,
      "function": "fetch_headlines",
      "class_name": "NewsApiClient",
      "code": "return []",
      "vars_in_scope": [
        "data",
        "items",
        "self",
        "topic",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 125,
      "end_line": 125,
      "function": "fetch_headlines",
      "class_name": "NewsApiClient",
      "code": "return []",
      "vars_in_scope": [
        "data",
        "items",
        "self",
        "topic",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 128,
      "end_line": 128,
      "function": "fetch_headlines",
      "class_name": "NewsApiClient",
      "code": "return []",
      "vars_in_scope": [
        "data",
        "items",
        "self",
        "topic",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 129,
      "end_line": 129,
      "function": "fetch_headlines",
      "class_name": "NewsApiClient",
      "code": "return [i for i in items if isinstance(i, dict)]",
      "vars_in_scope": [
        "data",
        "items",
        "self",
        "topic",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 131,
      "end_line": 131,
      "function": "fetch_article_detail",
      "class_name": "NewsApiClient",
      "code": "def fetch_article_detail(self, article_id: str) -> Optional[Dict[str, Any]]:",
      "vars_in_scope": [
        "article_id",
        "data",
        "self",
        "url"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 133,
      "end_line": 133,
      "function": "fetch_article_detail",
      "class_name": "NewsApiClient",
      "code": "return None",
      "vars_in_scope": [
        "article_id",
        "data",
        "self",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 137,
      "end_line": 137,
      "function": "fetch_article_detail",
      "class_name": "NewsApiClient",
      "code": "return None",
      "vars_in_scope": [
        "article_id",
        "data",
        "self",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 138,
      "end_line": 138,
      "function": "fetch_article_detail",
      "class_name": "NewsApiClient",
      "code": "return data",
      "vars_in_scope": [
        "article_id",
        "data",
        "self",
        "url"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 141,
      "end_line": 141,
      "function": "load_config",
      "class_name": null,
      "code": "def load_config(path: Path) -> Dict[str, Any]:",
      "vars_in_scope": [
        "path"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 143,
      "end_line": 143,
      "function": "load_config",
      "class_name": null,
      "code": "return {}",
      "vars_in_scope": [
        "path"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 146,
      "end_line": 146,
      "function": "load_config",
      "class_name": null,
      "code": "return json.load(f)",
      "vars_in_scope": [
        "path"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "exception_handler_entry",
      "line": 147,
      "end_line": 147,
      "function": "load_config",
      "class_name": null,
      "code": "except ...",
      "vars_in_scope": [
        "path"
      ],
      "why": "exception handler enry",
      "severity_hint": "ERROR"
    },
    {
      "kind": "return_stmt",
      "line": 148,
      "end_line": 148,
      "function": "load_config",
      "class_name": null,
      "code": "return {}",
      "vars_in_scope": [
        "path"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 151,
      "end_line": 151,
      "function": "load_local_articles",
      "class_name": null,
      "code": "def load_local_articles(path: Path) -> NewsStore:",
      "vars_in_scope": [
        "art",
        "data",
        "path",
        "store"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 154,
      "end_line": 154,
      "function": "load_local_articles",
      "class_name": null,
      "code": "return store",
      "vars_in_scope": [
        "art",
        "data",
        "path",
        "store"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "exception_handler_entry",
      "line": 158,
      "end_line": 158,
      "function": "load_local_articles",
      "class_name": null,
      "code": "except ...",
      "vars_in_scope": [
        "art",
        "data",
        "path",
        "store"
      ],
      "why": "exception handler enry",
      "severity_hint": "ERROR"
    },
    {
      "kind": "return_stmt",
      "line": 159,
      "end_line": 159,
      "function": "load_local_articles",
      "class_name": null,
      "code": "return store",
      "vars_in_scope": [
        "art",
        "data",
        "path",
        "store"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 166,
      "end_line": 166,
      "function": "load_local_articles",
      "class_name": null,
      "code": "return store",
      "vars_in_scope": [
        "art",
        "data",
        "path",
        "store"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 169,
      "end_line": 169,
      "function": "save_digest",
      "class_name": null,
      "code": "def save_digest(path: Path, articles: Iterable[Article]) -> None:",
      "vars_in_scope": [
        "articles",
        "path",
        "rows",
        "tmp"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "exception_handler_entry",
      "line": 177,
      "end_line": 177,
      "function": "save_digest",
      "class_name": null,
      "code": "except ...",
      "vars_in_scope": [
        "articles",
        "path",
        "rows",
        "tmp"
      ],
      "why": "exception handler enry",
      "severity_hint": "ERROR"
    },
    {
      "kind": "func_entry",
      "line": 182,
      "end_line": 182,
      "function": "filter_articles_by_score",
      "class_name": null,
      "code": "def filter_articles_by_score(articles: Iterable[Article], min_score: float) -> List[Article]:",
      "vars_in_scope": [
        "articles",
        "min_score",
        "result"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 185,
      "end_line": 185,
      "function": "filter_articles_by_score",
      "class_name": null,
      "code": "return []",
      "vars_in_scope": [
        "articles",
        "min_score",
        "result"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 186,
      "end_line": 186,
      "function": "filter_articles_by_score",
      "class_name": null,
      "code": "return sorted(result, key=lambda a: a.score, reverse=True)",
      "vars_in_scope": [
        "articles",
        "min_score",
        "result"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 189,
      "end_line": 189,
      "function": "group_by_source",
      "class_name": null,
      "code": "def group_by_source(articles: Iterable[Article]) -> Dict[str, List[Article]]:",
      "vars_in_scope": [
        "articles",
        "groups"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 193,
      "end_line": 193,
      "function": "group_by_source",
      "class_name": null,
      "code": "return groups",
      "vars_in_scope": [
        "articles",
        "groups"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 196,
      "end_line": 196,
      "function": "summarize_sources",
      "class_name": null,
      "code": "def summarize_sources(groups: Dict[str, List[Article]]) -> Dict[str, Any]:",
      "vars_in_scope": [
        "groups",
        "summary",
        "top"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 207,
      "end_line": 207,
      "function": "summarize_sources",
      "class_name": null,
      "code": "return summary",
      "vars_in_scope": [
        "groups",
        "summary",
        "top"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "func_entry",
      "line": 210,
      "end_line": 210,
      "function": "main",
      "class_name": null,
      "code": "def main(base_dir: str = \"data\", topic: str = \"\") -> int:",
      "vars_in_scope": [
        "api_url",
        "art",
        "base",
        "base_dir",
        "cfg",
        "client",
        "filtered",
        "groups",
        "local_store",
        "min_score",
        "remote_rows",
        "summary",
        "topic"
      ],
      "why": "function entry",
      "severity_hint": "DEBUG"
    },
    {
      "kind": "return_stmt",
      "line": 226,
      "end_line": 226,
      "function": "main",
      "class_name": null,
      "code": "return 1",
      "vars_in_scope": [
        "api_url",
        "art",
        "base",
        "base_dir",
        "cfg",
        "client",
        "filtered",
        "groups",
        "local_store",
        "min_score",
        "remote_rows",
        "summary",
        "topic"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 234,
      "end_line": 234,
      "function": "main",
      "class_name": null,
      "code": "return 0",
      "vars_in_scope": [
        "api_url",
        "art",
        "base",
        "base_dir",
        "cfg",
        "client",
        "filtered",
        "groups",
        "local_store",
        "min_score",
        "remote_rows",
        "summary",
        "topic"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    },
    {
      "kind": "return_stmt",
      "line": 235,
      "end_line": 235,
      "function": "main",
      "class_name": null,
      "code": "return 0",
      "vars_in_scope": [
        "api_url",
        "art",
        "base",
        "base_dir",
        "cfg",
        "client",
        "filtered",
        "groups",
        "local_store",
        "min_score",
        "remote_rows",
        "summary",
        "topic"
      ],
      "why": "return statement",
      "severity_hint": "INFO"
    }
  ]
}
